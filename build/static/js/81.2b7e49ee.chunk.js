"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[81],{211:(e,t,n)=>{n.d(t,{OH:()=>pe});var r=n(168),a=n(43),o=n(746),i=n(408);class s extends i.Mesh{constructor(e,t){var n,r;const a=(o=e)&&o.isCubeTexture;var o;const s=(null!=(r=a?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024)/4,l=Math.floor(Math.log2(s)),c=Math.pow(2,l),u=3*Math.max(c,112),d=4*c,p=[a?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/u),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/d),"#define CUBEUV_MAX_MIP ".concat(l,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(parseInt(i.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),h={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new i.IcosahedronGeometry(1,16),new i.ShaderMaterial({uniforms:h,fragmentShader:p,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:i.DoubleSide}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class l extends i.DataTextureLoader{constructor(e){super(e),this.type=i.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let r=e.pos,a=-1,o=0,i="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(a=s.indexOf("\n"))&&o<t&&r<e.byteLength;)i+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<a&&(!1!==n&&(e.pos+=o+a+1),i+s.slice(0,a))},r=function(e,t,n,r){const a=e[t+3],o=Math.pow(2,a-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o,n[r+3]=1},a=function(e,t,n,r){const a=e[t+3],o=Math.pow(2,a-128)/255;n[r+0]=i.DataUtils.toHalfFloat(Math.min(e[t+0]*o,65504)),n[r+1]=i.DataUtils.toHalfFloat(Math.min(e[t+1]*o,65504)),n[r+2]=i.DataUtils.toHalfFloat(Math.min(e[t+2]*o,65504)),n[r+3]=i.DataUtils.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const s=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,i=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=n(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),s.valid|=1,s.programtype=c[1],s.string+=l+"\n";l=n(e),!1!==l;)if(s.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(s.gamma=parseFloat(c[1])),(c=l.match(a))&&(s.exposure=parseFloat(c[1])),(c=l.match(o))&&(s.valid|=2,s.format=c[1]),(c=l.match(i))&&(s.valid|=4,s.height=parseInt(c[1],10),s.width=parseInt(c[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=l+"\n";return 2&s.valid||t(3,"missing format specifier"),4&s.valid||t(3,"missing image size specifier"),s}(o),l=s.width,c=s.height,u=function(e,n,r){const a=n;if(a<8||a>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);a!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const o=new Uint8Array(4*n*r);o.length||t(4,"unable to allocate buffer space");let i=0,s=0;const l=4*a,c=new Uint8Array(4),u=new Uint8Array(l);let d=r;for(;d>0&&s<e.byteLength;){s+4>e.byteLength&&t(1),c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==a||t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&s<e.byteLength;){n=e[s++];const a=n>128;if(a&&(n-=128),(0===n||r+n>l)&&t(3,"bad scanline data"),a){const t=e[s++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(s,s+n),r),r+=n,s+=n}const p=a;for(let e=0;e<p;e++){let t=0;o[i]=u[e+t],t+=a,o[i+1]=u[e+t],t+=a,o[i+2]=u[e+t],t+=a,o[i+3]=u[e+t],i+=4}d--}return o}(o.subarray(o.pos),l,c);let d,p,h;switch(this.type){case i.FloatType:h=u.length/4;const e=new Float32Array(4*h);for(let n=0;n<h;n++)r(u,4*n,e,4*n);d=e,p=i.FloatType;break;case i.HalfFloatType:h=u.length/4;const t=new Uint16Array(4*h);for(let n=0;n<h;n++)a(u,4*n,t,4*n);d=t,p=i.HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:l,height:c,data:d,header:s.string,gamma:s.gamma,exposure:s.exposure,type:p}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){switch(e.type){case i.FloatType:case i.HalfFloatType:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,r)}}var c=Uint8Array,u=Uint16Array,d=Uint32Array,p=new c([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),h=new c([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f=new c([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=function(e,t){for(var n=new u(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new d(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)a[o]=o-n[r]<<5|r;return[n,a]},g=m(p,2),v=g[0],y=g[1];v[28]=258,y[258]=28;for(var w=m(h,0),b=w[0],E=(w[1],new u(32768)),M=0;M<32768;++M){var A=(43690&M)>>>1|(21845&M)<<1;A=(61680&(A=(52428&A)>>>2|(13107&A)<<2))>>>4|(3855&A)<<4,E[M]=((65280&A)>>>8|(255&A)<<8)>>>1}var x=function(e,t,n){for(var r=e.length,a=0,o=new u(t);a<r;++a)++o[e[a]-1];var i,s=new u(t);for(a=0;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){i=new u(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],p=s[e[a]-1]++<<d,h=p|(1<<d)-1;p<=h;++p)i[E[p]>>>l]=c}else for(i=new u(r),a=0;a<r;++a)e[a]&&(i[a]=E[s[e[a]-1]++]>>>15-e[a]);return i},T=new c(288);for(M=0;M<144;++M)T[M]=8;for(M=144;M<256;++M)T[M]=9;for(M=256;M<280;++M)T[M]=7;for(M=280;M<288;++M)T[M]=8;var S=new c(32);for(M=0;M<32;++M)S[M]=5;var _=x(T,9,1),O=x(S,5,1),C=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},I=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},P=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},R=function(e){return(e/8|0)+(7&e&&1)},F=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof u?u:e instanceof d?d:c)(n-t);return r.set(e.subarray(t,n)),r},k=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new c(0);var a=!t||n,o=!n||n.i;n||(n={}),t||(t=new c(3*r));var i=function(e){var n=t.length;if(e>n){var r=new c(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,l=n.p||0,u=n.b||0,d=n.l,m=n.d,g=n.m,y=n.n,w=8*r;do{if(!d){n.f=s=I(e,l,1);var E=I(e,l+1,3);if(l+=3,!E){var M=e[(H=R(l)+4)-4]|e[H-3]<<8,A=H+M;if(A>r){if(o)throw"unexpected EOF";break}a&&i(u+M),t.set(e.subarray(H,A),u),n.b=u+=M,n.p=l=8*A;continue}if(1==E)d=_,m=O,g=9,y=5;else{if(2!=E)throw"invalid block type";var T=I(e,l,31)+257,S=I(e,l+10,15)+4,k=T+I(e,l+5,31)+1;l+=14;for(var U=new c(k),L=new c(19),D=0;D<S;++D)L[f[D]]=I(e,l+3*D,7);l+=3*S;var j=C(L),N=(1<<j)-1,z=x(L,j,1);for(D=0;D<k;){var H,B=z[I(e,l,N)];if(l+=15&B,(H=B>>>4)<16)U[D++]=H;else{var V=0,W=0;for(16==H?(W=3+I(e,l,3),l+=2,V=U[D-1]):17==H?(W=3+I(e,l,7),l+=3):18==H&&(W=11+I(e,l,127),l+=7);W--;)U[D++]=V}}var Y=U.subarray(0,T),G=U.subarray(T);g=C(Y),y=C(G),d=x(Y,g,1),m=x(G,y,1)}if(l>w){if(o)throw"unexpected EOF";break}}a&&i(u+131072);for(var X=(1<<g)-1,Z=(1<<y)-1,q=l;;q=l){var K=(V=d[P(e,l)&X])>>>4;if((l+=15&V)>w){if(o)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(K<256)t[u++]=K;else{if(256==K){q=l,d=null;break}var Q=K-254;if(K>264){var $=p[D=K-257];Q=I(e,l,(1<<$)-1)+v[D],l+=$}var J=m[P(e,l)&Z],ee=J>>>4;if(!J)throw"invalid distance";l+=15&J;G=b[ee];if(ee>3){$=h[ee];G+=P(e,l)&(1<<$)-1,l+=$}if(l>w){if(o)throw"unexpected EOF";break}a&&i(u+131072);for(var te=u+Q;u<te;u+=4)t[u]=t[u-G],t[u+1]=t[u+1-G],t[u+2]=t[u+2-G],t[u+3]=t[u+3-G];u=te}}n.l=d,n.p=q,n.b=u,d&&(s=1,n.m=g,n.d=m,n.n=y)}while(!s);return u==t.length?t:F(t,0,u)},U=new c(0),L=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function D(e,t){return k((L(e),e.subarray(2,-4)),t)}var j="undefined"!=typeof TextDecoder&&new TextDecoder;try{j.decode(U,{stream:!0}),1}catch(he){}const N="colorSpace"in new i.Texture;class z extends i.DataTextureLoader{constructor(e){super(e),this.type=i.HalfFloatType}parse(e){const t=65536,n=14,r=65537,a=16384,o=Math.pow(2.7182818,2.2);const s={l:0,c:0,lc:0};function l(e,t,n,r,a){for(;n<e;)t=t<<8|W(r,a),n+=8;n-=e,s.l=t>>n&(1<<e)-1,s.c=t,s.lc=n}const c=new Array(59);function u(e,t,n,a,o,i,u){for(var d=n,p=0,h=0;o<=i;o++){if(d.value-n.value>a)return!1;l(6,p,h,e,d);var f=s.l;if(p=s.c,h=s.lc,u[o]=f,63==f){if(d.value-n.value>a)throw"Something wrong with hufUnpackEncTable";l(8,p,h,e,d);var m=s.l+6;if(p=s.c,h=s.lc,o+m>i+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[o++]=0;o--}else if(f>=59){if(o+(m=f-59+2)>i+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[o++]=0;o--}}!function(e){for(var t=0;t<=58;++t)c[t]=0;for(t=0;t<r;++t)c[e[t]]+=1;var n=0;for(t=58;t>0;--t){var a=n+c[t]>>1;c[t]=n,n=a}for(t=0;t<r;++t){var o=e[t];o>0&&(e[t]=o|c[o]++<<6)}}(u)}function d(e){return 63&e}function p(e){return e>>6}const h={c:0,lc:0};function f(e,t,n,r){e=e<<8|W(n,r),t+=8,h.c=e,h.lc=t}const m={c:0,lc:0};function g(e,t,n,r,a,o,i,s,l,c){if(e==t){r<8&&(f(n,r,a,i),n=h.c,r=h.lc);var u=n>>(r-=8);u=new Uint8Array([u])[0];if(l.value+u>c)return!1;for(var d=s[l.value-1];u-- >0;)s[l.value++]=d}else{if(!(l.value<c))return!1;s[l.value++]=e}m.c=n,m.lc=r}function v(e){return 65535&e}function y(e){var t=v(e);return t>32767?t-65536:t}const w={a:0,b:0};function b(e,t){var n=y(e),r=y(t),a=n+(1&r)+(r>>1),o=a,i=a-r;w.a=o,w.b=i}function E(e,t){var n=v(e),r=v(t),a=n-(r>>1)&65535,o=r+a-32768&65535;w.a=o,w.b=a}function M(e,t,n,r,a,o,i){for(var s,l=i<16384,c=n>a?a:n,u=1;u<=c;)u<<=1;for(s=u>>=1,u>>=1;u>=1;){for(var d,p,h,f,m=0,g=m+o*(a-s),v=o*u,y=o*s,M=r*u,A=r*s;m<=g;m+=y){for(var x=m,T=m+r*(n-s);x<=T;x+=A){var S=x+M,_=(O=x+v)+M;l?(b(e[x+t],e[O+t]),d=w.a,h=w.b,b(e[S+t],e[_+t]),p=w.a,f=w.b,b(d,p),e[x+t]=w.a,e[S+t]=w.b,b(h,f),e[O+t]=w.a,e[_+t]=w.b):(E(e[x+t],e[O+t]),d=w.a,h=w.b,E(e[S+t],e[_+t]),p=w.a,f=w.b,E(d,p),e[x+t]=w.a,e[S+t]=w.b,E(h,f),e[O+t]=w.a,e[_+t]=w.b)}if(n&u){var O=x+v;l?b(e[x+t],e[O+t]):E(e[x+t],e[O+t]),d=w.a,e[O+t]=w.b,e[x+t]=d}}if(a&u)for(x=m,T=m+r*(n-s);x<=T;x+=A){S=x+M;l?b(e[x+t],e[S+t]):E(e[x+t],e[S+t]),d=w.a,e[S+t]=w.b,e[x+t]=d}s=u,u>>=1}return m}function A(e,t,o,i,s,l){var c=o.value,v=V(t,o),y=V(t,o);o.value+=4;var w=V(t,o);if(o.value+=4,v<0||v>=r||y<0||y>=r)throw"Something wrong with HUF_ENCSIZE";var b=new Array(r),E=new Array(a);if(function(e){for(var t=0;t<a;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(E),u(e,0,o,i-(o.value-c),v,y,b),w>8*(i-(o.value-c)))throw"Something wrong with hufUncompress";!function(e,t,r,a){for(;t<=r;t++){var o=p(e[t]),i=d(e[t]);if(o>>i)throw"Invalid table entry";if(i>n){if((u=a[o>>i-n]).len)throw"Invalid table entry";if(u.lit++,u.p){var s=u.p;u.p=new Array(u.lit);for(var l=0;l<u.lit-1;++l)u.p[l]=s[l]}else u.p=new Array(1);u.p[u.lit-1]=t}else if(i){var c=0;for(l=1<<n-i;l>0;l--){var u;if((u=a[(o<<n-i)+c]).len||u.p)throw"Invalid table entry";u.len=i,u.lit=t,c++}}}}(b,v,y,E),function(e,t,r,a,o,i,s,l,c,u){for(var v=0,y=0,w=l,b=Math.trunc(o.value+(i+7)/8);o.value<b;)for(f(v,y,r,o),v=h.c,y=h.lc;y>=n;)if((x=t[v>>y-n&16383]).len)y-=x.len,g(x.lit,s,v,y,r,0,o,c,u,w),v=m.c,y=m.lc;else{if(!x.p)throw"hufDecode issues";var E;for(E=0;E<x.lit;E++){for(var M=d(e[x.p[E]]);y<M&&o.value<b;)f(v,y,r,o),v=h.c,y=h.lc;if(y>=M&&p(e[x.p[E]])==(v>>y-M&(1<<M)-1)){y-=M,g(x.p[E],s,v,y,r,0,o,c,u,w),v=m.c,y=m.lc;break}}if(E==x.lit)throw"hufDecode issues"}var A=8-i&7;for(v>>=A,y-=A;y>0;){var x;if(!(x=t[v<<n-y&16383]).len)throw"hufDecode issues";y-=x.len,g(x.lit,s,v,y,r,0,o,c,u,w),v=m.c,y=m.lc}}(b,E,e,0,o,w,y,l,s,{value:0})}function x(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function T(e,t){for(var n=0,r=Math.floor((e.length+1)/2),a=0,o=e.length-1;!(a>o)&&(t[a++]=e[n++],!(a>o));)t[a++]=e[r++]}function S(e){for(var t=e.byteLength,n=new Array,r=0,a=new DataView(e);t>0;){var o=a.getInt8(r++);if(o<0){t-=(s=-o)+1;for(var i=0;i<s;i++)n.push(a.getUint8(r++))}else{var s=o;t-=2;var l=a.getUint8(r++);for(i=0;i<s+1;i++)n.push(l)}}return n}function _(e,t,n){for(var r,a=1;a<64;)65280==(r=t[e.value])?a=64:r>>8==255?a+=255&r:(n[a]=r,a++),e.value++}function O(e,t){t[0]=q(e[0]),t[1]=q(e[1]),t[2]=q(e[5]),t[3]=q(e[6]),t[4]=q(e[14]),t[5]=q(e[15]),t[6]=q(e[27]),t[7]=q(e[28]),t[8]=q(e[2]),t[9]=q(e[4]),t[10]=q(e[7]),t[11]=q(e[13]),t[12]=q(e[16]),t[13]=q(e[26]),t[14]=q(e[29]),t[15]=q(e[42]),t[16]=q(e[3]),t[17]=q(e[8]),t[18]=q(e[12]),t[19]=q(e[17]),t[20]=q(e[25]),t[21]=q(e[30]),t[22]=q(e[41]),t[23]=q(e[43]),t[24]=q(e[9]),t[25]=q(e[11]),t[26]=q(e[18]),t[27]=q(e[24]),t[28]=q(e[31]),t[29]=q(e[40]),t[30]=q(e[44]),t[31]=q(e[53]),t[32]=q(e[10]),t[33]=q(e[19]),t[34]=q(e[23]),t[35]=q(e[32]),t[36]=q(e[39]),t[37]=q(e[45]),t[38]=q(e[52]),t[39]=q(e[54]),t[40]=q(e[20]),t[41]=q(e[22]),t[42]=q(e[33]),t[43]=q(e[38]),t[44]=q(e[46]),t[45]=q(e[51]),t[46]=q(e[55]),t[47]=q(e[60]),t[48]=q(e[21]),t[49]=q(e[34]),t[50]=q(e[37]),t[51]=q(e[47]),t[52]=q(e[50]),t[53]=q(e[56]),t[54]=q(e[59]),t[55]=q(e[61]),t[56]=q(e[35]),t[57]=q(e[36]),t[58]=q(e[48]),t[59]=q(e[49]),t[60]=q(e[57]),t[61]=q(e[58]),t[62]=q(e[62]),t[63]=q(e[63])}function C(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),a=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),i=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625);for(var l=new Array(4),c=new Array(4),u=new Array(4),d=new Array(4),p=0;p<8;++p){var h=8*p;l[0]=r*e[h+2],l[1]=i*e[h+2],l[2]=r*e[h+6],l[3]=i*e[h+6],c[0]=n*e[h+1]+a*e[h+3]+o*e[h+5]+s*e[h+7],c[1]=a*e[h+1]-s*e[h+3]-n*e[h+5]-o*e[h+7],c[2]=o*e[h+1]-n*e[h+3]+s*e[h+5]+a*e[h+7],c[3]=s*e[h+1]-o*e[h+3]+a*e[h+5]-n*e[h+7],u[0]=t*(e[h+0]+e[h+4]),u[3]=t*(e[h+0]-e[h+4]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],d[0]=u[0]+u[1],d[1]=u[3]+u[2],d[2]=u[3]-u[2],d[3]=u[0]-u[1],e[h+0]=d[0]+c[0],e[h+1]=d[1]+c[1],e[h+2]=d[2]+c[2],e[h+3]=d[3]+c[3],e[h+4]=d[3]-c[3],e[h+5]=d[2]-c[2],e[h+6]=d[1]-c[1],e[h+7]=d[0]-c[0]}for(var f=0;f<8;++f)l[0]=r*e[16+f],l[1]=i*e[16+f],l[2]=r*e[48+f],l[3]=i*e[48+f],c[0]=n*e[8+f]+a*e[24+f]+o*e[40+f]+s*e[56+f],c[1]=a*e[8+f]-s*e[24+f]-n*e[40+f]-o*e[56+f],c[2]=o*e[8+f]-n*e[24+f]+s*e[40+f]+a*e[56+f],c[3]=s*e[8+f]-o*e[24+f]+a*e[40+f]-n*e[56+f],u[0]=t*(e[f]+e[32+f]),u[3]=t*(e[f]-e[32+f]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],d[0]=u[0]+u[1],d[1]=u[3]+u[2],d[2]=u[3]-u[2],d[3]=u[0]-u[1],e[0+f]=d[0]+c[0],e[8+f]=d[1]+c[1],e[16+f]=d[2]+c[2],e[24+f]=d[3]+c[3],e[32+f]=d[3]-c[3],e[40+f]=d[2]-c[2],e[48+f]=d[1]-c[1],e[56+f]=d[0]-c[0]}function I(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],a=e[2][t];e[0][t]=n+1.5747*a,e[1][t]=n-.1873*r-.4682*a,e[2][t]=n+1.8556*r}}function P(e,t,n){for(var r=0;r<64;++r)t[n+r]=i.DataUtils.toHalfFloat(R(e[r]))}function R(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(o,Math.abs(e)-1)}function F(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function k(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(S(t)),r=new Uint8Array(n.length);return x(n),T(n,r),new DataView(r.buffer)}function U(e){var t=D(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return x(t),T(t,n),new DataView(n.buffer)}function L(e){for(var n=e.viewer,r={value:e.offset.value},a=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),o=new Uint8Array(8192),i=0,s=new Array(e.channels),l=0;l<e.channels;l++)s[l]={},s[l].start=i,s[l].end=s[l].start,s[l].nx=e.width,s[l].ny=e.lines,s[l].size=e.type,i+=s[l].nx*s[l].ny*s[l].size;var c=K(n,r),u=K(n,r);if(u>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(c<=u)for(l=0;l<u-c+1;l++)o[l+c]=Y(n,r);var d=new Uint16Array(t),p=function(e,n){for(var r=0,a=0;a<t;++a)(0==a||e[a>>3]&1<<(7&a))&&(n[r++]=a);for(var o=r-1;r<t;)n[r++]=0;return o}(o,d),h=V(n,r);A(e.array,n,r,h,a,i);for(l=0;l<e.channels;++l)for(var f=s[l],m=0;m<s[l].size;++m)M(a,f.start+m,f.nx,f.size,f.ny,f.nx*f.size,p);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(d,a,i);for(var g=0,v=new Uint8Array(a.buffer.byteLength),y=0;y<e.lines;y++)for(var w=0;w<e.channels;w++){var b=(f=s[w]).nx*f.size,E=new Uint8Array(a.buffer,2*f.end,2*b);v.set(E,g),g+=2*b,f.end+=b}return new DataView(v.buffer)}function j(e){var t=D(e.array.slice(e.offset.value,e.offset.value+e.size));const n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n);let a=0,o=0;const i=new Array(4);for(let s=0;s<e.lines;s++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:i[0]=a,i[1]=i[0]+e.width,a=i[1]+e.width;for(let a=0;a<e.width;++a){n+=t[i[0]++]<<8|t[i[1]++],r[o]=n,o++}break;case 2:i[0]=a,i[1]=i[0]+e.width,i[2]=i[1]+e.width,a=i[2]+e.width;for(let a=0;a<e.width;++a){n+=t[i[0]++]<<24|t[i[1]++]<<16|t[i[2]++]<<8,r[o]=n,o++}}}return new DataView(r.buffer)}function z(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),a={version:G(t,n),unknownUncompressedSize:G(t,n),unknownCompressedSize:G(t,n),acCompressedSize:G(t,n),dcCompressedSize:G(t,n),rleCompressedSize:G(t,n),rleUncompressedSize:G(t,n),rleRawSize:G(t,n),totalAcUncompressedCount:G(t,n),totalDcUncompressedCount:G(t,n),acCompression:G(t,n)};if(a.version<2)throw"EXRLoader.parse: "+ne.compression+" version "+a.version+" is unsupported";for(var o=new Array,i=K(t,n)-2;i>0;){var s=H(t.buffer,n),l=Y(t,n),c=l>>2&3,u=new Int8Array([(l>>4)-1])[0],d=Y(t,n);o.push({name:s,index:u,type:d,compression:c}),i-=s.length+3}for(var p=ne.channels,h=new Array(e.channels),f=0;f<e.channels;++f){var m=h[f]={},g=p[f];m.name=g.name,m.compression=0,m.decoded=!1,m.type=g.pixelType,m.pLinear=g.pLinear,m.width=e.width,m.height=e.lines}for(var v={idx:new Array(3)},y=0;y<e.channels;++y)for(m=h[y],f=0;f<o.length;++f){var w=o[f];m.name==w.name&&(m.compression=w.compression,w.index>=0&&(v.idx[w.index]=y),m.offset=y)}if(a.acCompressedSize>0)switch(a.acCompression){case 0:var b=new Uint16Array(a.totalAcUncompressedCount);A(e.array,t,n,a.acCompressedSize,b,a.totalAcUncompressedCount);break;case 1:var E=D(e.array.slice(n.value,n.value+a.totalAcUncompressedCount));b=new Uint16Array(E.buffer);n.value+=a.totalAcUncompressedCount}if(a.dcCompressedSize>0){var M={array:e.array,offset:n,size:a.dcCompressedSize},x=new Uint16Array(U(M).buffer);n.value+=a.dcCompressedSize}if(a.rleRawSize>0){var T=S((E=D(e.array.slice(n.value,n.value+a.rleCompressedSize))).buffer);n.value+=a.rleCompressedSize}var R=0,F=new Array(h.length);for(f=0;f<F.length;++f)F[f]=new Array;for(var k=0;k<e.lines;++k)for(var L=0;L<h.length;++L)F[L].push(R),R+=h[L].width*e.type*2;!function(e,t,n,r,a,o){var i=new DataView(o.buffer),s=n[e.idx[0]].width,l=n[e.idx[0]].height,c=Math.floor(s/8),u=Math.ceil(s/8),d=Math.ceil(l/8),p=s-8*(u-1),h=l-8*(d-1),f={value:0},m=new Array(3),g=new Array(3),v=new Array(3),y=new Array(3),w=new Array(3);for(let _=0;_<3;++_)w[_]=t[e.idx[_]],m[_]=_<1?0:m[_-1]+u*d,g[_]=new Float32Array(64),v[_]=new Uint16Array(64),y[_]=new Uint16Array(64*u);for(let R=0;R<d;++R){var b=8;R==d-1&&(b=h);var E=8;for(let e=0;e<u;++e){e==u-1&&(E=p);for(let e=0;e<3;++e)v[e].fill(0),v[e][0]=a[m[e]++],_(f,r,v[e]),O(v[e],g[e]),C(g[e]);I(g);for(let t=0;t<3;++t)P(g[t],y[t],64*e)}let t=0;for(let r=0;r<3;++r){const a=n[e.idx[r]].type;for(let e=8*R;e<8*R+b;++e){t=w[r][e];for(let n=0;n<c;++n){const o=64*n+8*(7&e);i.setUint16(t+0*a,y[r][o+0],!0),i.setUint16(t+2*a,y[r][o+1],!0),i.setUint16(t+4*a,y[r][o+2],!0),i.setUint16(t+6*a,y[r][o+3],!0),i.setUint16(t+8*a,y[r][o+4],!0),i.setUint16(t+10*a,y[r][o+5],!0),i.setUint16(t+12*a,y[r][o+6],!0),i.setUint16(t+14*a,y[r][o+7],!0),t+=16*a}}if(c!=u)for(let e=8*R;e<8*R+b;++e){const t=w[r][e]+8*c*2*a,n=64*c+8*(7&e);for(let e=0;e<E;++e)i.setUint16(t+2*e*a,y[r][n+e],!0)}}}for(var M=new Uint16Array(s),A=(i=new DataView(o.buffer),0);A<3;++A){n[e.idx[A]].decoded=!0;var x=n[e.idx[A]].type;if(2==n[A].type)for(var T=0;T<l;++T){const e=w[A][T];for(var S=0;S<s;++S)M[S]=i.getUint16(e+2*S*x,!0);for(S=0;S<s;++S)i.setFloat32(e+2*S*x,q(M[S]),!0)}}}(v,F,h,b,x,r);for(f=0;f<h.length;++f){if(!(m=h[f]).decoded){if(2!==m.compression)throw"EXRLoader.parse: unsupported channel compression";var j=0,N=0;for(k=0;k<e.lines;++k){for(var z=F[f][j],B=0;B<m.width;++B){for(var V=0;V<2*m.type;++V)r[z++]=T[N+V*m.width*m.height];N++}j++}}}return new DataView(r.buffer)}function H(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var a=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,a}function B(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function V(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function W(e,t){var n=e[t.value];return t.value=t.value+1,n}function Y(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}const G=function(e,t){let n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function X(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function Z(e,t){return i.DataUtils.toHalfFloat(X(e,t))}function q(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function K(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function Q(e,t){return q(K(e,t))}function $(e,t,n,r,a){return"string"===r||"stringvector"===r||"iccProfile"===r?function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,a):"chlist"===r?function(e,t,n,r){for(var a=n.value,o=[];n.value<a+r-1;){var i=H(t,n),s=B(e,n),l=Y(e,n);n.value+=3;var c=B(e,n),u=B(e,n);o.push({name:i,pixelType:s,pLinear:l,xSampling:c,ySampling:u})}return n.value+=1,o}(e,t,n,a):"chromaticities"===r?function(e,t){return{redX:X(e,t),redY:X(e,t),greenX:X(e,t),greenY:X(e,t),blueX:X(e,t),blueY:X(e,t),whiteX:X(e,t),whiteY:X(e,t)}}(e,n):"compression"===r?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][Y(e,t)]}(e,n):"box2i"===r?function(e,t){return{xMin:V(e,t),yMin:V(e,t),xMax:V(e,t),yMax:V(e,t)}}(e,n):"lineOrder"===r?function(e,t){return["INCREASING_Y"][Y(e,t)]}(e,n):"float"===r?X(e,n):"v2f"===r?function(e,t){return[X(e,t),X(e,t)]}(e,n):"v3f"===r?function(e,t){return[X(e,t),X(e,t),X(e,t)]}(e,n):"int"===r?B(e,n):"rational"===r?function(e,t){return[B(e,t),V(e,t)]}(e,n):"timecode"===r?function(e,t){return[V(e,t),V(e,t)]}(e,n):"preview"===r?(n.value+=a,"skipped"):void(n.value+=a)}const J=new DataView(e),ee=new Uint8Array(e),te={value:0},ne=function(e,t,n){const r={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);const a=e.getUint8(5);r.spec={singleTile:!!(2&a),longName:!!(4&a),deepFormat:!!(8&a),multiPart:!!(16&a)},n.value=8;for(var o=!0;o;){var i=H(t,n);if(0==i)o=!1;else{var s=H(t,n),l=$(e,t,n,s,V(e,n));void 0===l?console.warn("EXRLoader.parse: skipped unknown header attribute type '".concat(s,"'.")):r[i]=l}}if(0!=(-5&a))throw console.error("EXRHeader:",r),"THREE.EXRLoader: provided file is currently unsupported.";return r}(J,e,te),re=function(e,t,n,r,a){const o={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[N?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=F;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=k;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=U;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=U;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=L;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=j;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=z;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=z;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(o.scanlineBlockSize=o.lines,1==o.type)switch(a){case i.FloatType:o.getter=Q,o.inputSize=2;break;case i.HalfFloatType:o.getter=K,o.inputSize=2}else{if(2!=o.type)throw"EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".";switch(a){case i.FloatType:o.getter=X,o.inputSize=4;break;case i.HalfFloatType:o.getter=Z,o.inputSize=4}}o.blockCount=(e.dataWindow.yMax+1)/o.scanlineBlockSize;for(var s=0;s<o.blockCount;s++)G(t,r);o.outputChannels=3==o.channels?4:o.channels;const l=o.width*o.height*o.outputChannels;switch(a){case i.FloatType:o.byteArray=new Float32Array(l),o.channels<o.outputChannels&&o.byteArray.fill(1,0,l);break;case i.HalfFloatType:o.byteArray=new Uint16Array(l),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,l);break;default:console.error("THREE.EXRLoader: unsupported type: ",a)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?o.format=i.RGBAFormat:o.format=i.RedFormat,N?o.colorSpace="srgb-linear":o.encoding=3e3,o}(ne,J,ee,te,this.type),ae={value:0},oe={R:0,G:1,B:2,A:3,Y:0};for(let i=0;i<re.height/re.scanlineBlockSize;i++){const e=V(J,te);re.size=V(J,te),re.lines=e+re.scanlineBlockSize>re.height?re.height-e:re.scanlineBlockSize;const t=re.size<re.lines*re.bytesPerLine?re.uncompress(re):F(re);te.value+=re.size;for(let n=0;n<re.scanlineBlockSize;n++){const e=n+i*re.scanlineBlockSize;if(e>=re.height)break;for(let r=0;r<re.channels;r++){const a=oe[ne.channels[r].name];for(let o=0;o<re.width;o++){ae.value=(n*(re.channels*re.width)+r*re.width+o)*re.inputSize;const i=(re.height-1-e)*(re.width*re.outputChannels)+o*re.outputChannels+a;re.byteArray[i]=re.getter(t,ae)}}}}return{header:ne,width:re.width,height:re.height,data:re.byteArray,format:re.format,[N?"colorSpace":"encoding"]:re[N?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){N?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)}),n,r)}}const H=(e,t,n)=>{let r;switch(e){case i.UnsignedByteType:r=new Uint8ClampedArray(t*n*4);break;case i.HalfFloatType:r=new Uint16Array(t*n*4);break;case i.UnsignedIntType:r=new Uint32Array(t*n*4);break;case i.ByteType:r=new Int8Array(t*n*4);break;case i.ShortType:r=new Int16Array(t*n*4);break;case i.IntType:r=new Int32Array(t*n*4);break;case i.FloatType:r=new Float32Array(t*n*4);break;default:throw new Error("Unsupported data type")}return r};let B;class V{constructor(e){var t,n,r,a,o,s,l,c,u,d,p,h,f,m,g,v;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(he){throw this._renderer.setRenderTarget(null),he}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const y={format:i.RGBAFormat,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:void 0!==(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)?null===(n=e.renderTargetOptions)||void 0===n?void 0:n.anisotropy:1,generateMipmaps:void 0!==(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps)&&(null===(a=e.renderTargetOptions)||void 0===a?void 0:a.generateMipmaps),magFilter:void 0!==(null===(o=e.renderTargetOptions)||void 0===o?void 0:o.magFilter)?null===(s=e.renderTargetOptions)||void 0===s?void 0:s.magFilter:i.LinearFilter,minFilter:void 0!==(null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter)?null===(c=e.renderTargetOptions)||void 0===c?void 0:c.minFilter:i.LinearFilter,samples:void 0!==(null===(u=e.renderTargetOptions)||void 0===u?void 0:u.samples)?null===(d=e.renderTargetOptions)||void 0===d?void 0:d.samples:void 0,wrapS:void 0!==(null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapS)?null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS:i.ClampToEdgeWrapping,wrapT:void 0!==(null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapT)?null===(m=e.renderTargetOptions)||void 0===m?void 0:m.wrapT:i.ClampToEdgeWrapping};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=V.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new i.Scene,this._camera=new i.OrthographicCamera,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((e,t,n,r)=>{if(void 0!==B)return B;const a=new i.WebGLRenderTarget(1,1,r);t.setRenderTarget(a);const o=new i.Mesh(new i.PlaneGeometry,new i.MeshBasicMaterial({color:16777215}));t.render(o,n),t.setRenderTarget(null);const s=H(e,a.width,a.height);return t.readRenderTargetPixels(a,0,0,a.width,a.height,s),a.dispose(),o.geometry.dispose(),o.material.dispose(),B=0!==s[0],B})(this._type,this._renderer,this._camera,y)){let e;if(this._type===i.HalfFloatType)e=this._renderer.extensions.has("EXT_color_buffer_float")?i.FloatType:void 0;void 0!==e?(console.warn("This browser does not support reading pixels from ".concat(this._type," RenderTargets, switching to ").concat(i.FloatType)),this._type=e):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new i.Mesh(new i.PlaneGeometry,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new i.WebGLRenderTarget(this.width,this.height,y),this._renderTarget.texture.mapping=void 0!==(null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping)?null===(v=e.renderTargetOptions)||void 0===v?void 0:v.mapping:i.UVMapping}static instantiateRenderer(){const e=new i.WebGLRenderer;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=H(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new i.DataTexture(this.toArray(),this.width,this.height,i.RGBAFormat,this._type,(null===e||void 0===e?void 0:e.mapping)||i.UVMapping,(null===e||void 0===e?void 0:e.wrapS)||i.ClampToEdgeWrapping,(null===e||void 0===e?void 0:e.wrapT)||i.ClampToEdgeWrapping,(null===e||void 0===e?void 0:e.magFilter)||i.LinearFilter,(null===e||void 0===e?void 0:e.minFilter)||i.LinearFilter,(null===e||void 0===e?void 0:e.anisotropy)||1,i.LinearSRGBColorSpace);return t.generateMipmaps=void 0!==(null===e||void 0===e?void 0:e.generateMipmaps)&&(null===e||void 0===e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof i.ShaderMaterial&&Object.values(this.material.uniforms).forEach((e=>{e.value instanceof i.Texture&&e.value.dispose()})),Object.values(this.material).forEach((e=>{e instanceof i.Texture&&e.dispose()})),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class W extends i.ShaderMaterial{constructor(e){let{gamma:t,offsetHdr:n,offsetSdr:r,gainMapMin:a,gainMapMax:o,maxDisplayBoost:s,hdrCapacityMin:l,hdrCapacityMax:c,sdr:u,gainMap:d}=e;super({name:"GainMapDecoderMaterial",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n",uniforms:{sdr:{value:u},gainMap:{value:d},gamma:{value:new i.Vector3(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:(new i.Vector3).fromArray(n)},offsetSdr:{value:(new i.Vector3).fromArray(r)},gainMapMin:{value:(new i.Vector3).fromArray(a)},gainMapMax:{value:(new i.Vector3).fromArray(o)},weightFactor:{value:(Math.log2(s)-l)/(c-l)}},blending:i.NoBlending,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=l,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Y extends Error{}class G extends Error{}const X=(e,t,n)=>{var r;let a;const o=null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.nodeValue;if(o)a=o;else{const r=e.getElementsByTagName(t)[0];if(!r){if(n)return n;throw new Error("Can't find ".concat(t," in gainmap metadata"))}{const e=r.getElementsByTagName("rdf:li");if(3!==e.length)throw new Error("Gainmap metadata contains an array of items for ".concat(t," but its length is not 3"));a=Array.from(e).map((e=>e.innerHTML))}}return a};class Z{constructor(e){this.options={debug:!(!e||void 0===e.debug)&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise(((t,n)=>{const r=this.options.debug,a=new DataView(e.buffer);if(65496!==a.getUint16(0))return void n(new Error("Not a valid jpeg"));const o=a.byteLength;let i,s=2,l=0;for(;s<o;){if(++l>250)return void n(new Error("Found no marker after ".concat(l," loops \ud83d\ude35")));if(255!==a.getUint8(s))return void n(new Error("Not a valid marker at offset 0x".concat(s.toString(16),", found: 0x").concat(a.getUint8(s).toString(16))));if(i=a.getUint8(s+1),r&&console.log("Marker: ".concat(i.toString(16))),226===i){r&&console.log("Found APP2 marker (0xffe2)");const e=s+4;if(1297106432===a.getUint32(e)){const r=e+4;let o;if(18761===a.getUint16(r))o=!1;else{if(19789!==a.getUint16(r))return void n(new Error("No valid endianness marker found in TIFF header"));o=!0}if(42!==a.getUint16(r+2,!o))return void n(new Error("Not valid TIFF data! (no 0x002A marker)"));const i=a.getUint32(r+4,!o);if(i<8)return void n(new Error("Not valid TIFF data! (First offset less than 8)"));const s=r+i,l=a.getUint16(s,!o),c=s+2;let u=0;for(let e=c;e<c+12*l;e+=12)45057===a.getUint16(e,!o)&&(u=a.getUint32(e+8,!o));const d=s+2+12*l+4,p=[];for(let e=d;e<d+16*u;e+=16){const t={MPType:a.getUint32(e,!o),size:a.getUint32(e+4,!o),dataOffset:a.getUint32(e+8,!o),dependantImages:a.getUint32(e+12,!o),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=r+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,p.push(t)}if(this.options.extractNonFII&&p.length){const e=new Blob([a]),n=[];for(const t of p){if(t.isFII&&!this.options.extractFII)continue;const r=e.slice(t.start,t.end+1,"image/jpeg");n.push(r)}t(n)}}}s+=2+a.getUint16(s+2)}}))}}const q=async e=>{const t=(e=>{var t,n;let r;r="undefined"!==typeof TextDecoder?(new TextDecoder).decode(e):e.toString();let a=r.indexOf("<x:xmpmeta");const o=new DOMParser;for(;-1!==a;){const e=r.indexOf("x:xmpmeta>",a);r.slice(a,e+10);const i=r.slice(a,e+10);try{const e=o.parseFromString(i,"text/xml").getElementsByTagName("rdf:Description")[0],r=X(e,"hdrgm:GainMapMin","0"),a=X(e,"hdrgm:GainMapMax"),s=X(e,"hdrgm:Gamma","1"),l=X(e,"hdrgm:OffsetSDR","0.015625"),c=X(e,"hdrgm:OffsetHDR","0.015625");let u=null===(t=e.attributes.getNamedItem("hdrgm:HDRCapacityMin"))||void 0===t?void 0:t.nodeValue;u||(u="0");const d=null===(n=e.attributes.getNamedItem("hdrgm:HDRCapacityMax"))||void 0===n?void 0:n.nodeValue;if(!d)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(r)?r.map((e=>parseFloat(e))):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(a)?a.map((e=>parseFloat(e))):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(s)?s.map((e=>parseFloat(e))):[parseFloat(s),parseFloat(s),parseFloat(s)],offsetSdr:Array.isArray(l)?l.map((e=>parseFloat(e))):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map((e=>parseFloat(e))):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(u),hdrCapacityMax:parseFloat(d)}}catch(he){}a=r.indexOf("<x:xmpmeta",e)}})(e);if(!t)throw new G("Gain map XMP metadata not found");const n=new Z({extractFII:!0,extractNonFII:!0}),r=await n.extract(e);if(2!==r.length)throw new Y("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:t}},K=e=>new Promise(((t,n)=>{const r=document.createElement("img");r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=URL.createObjectURL(e)}));class Q extends i.Loader{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new i.LoadingManager}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new W({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new i.Texture,sdr:new i.Texture});return new V({width:16,height:16,type:i.HalfFloatType,colorSpace:i.LinearSRGBColorSpace,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){const a=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([n],{type:"image/jpeg"});let s,l,c=!1;if("undefined"===typeof createImageBitmap){const e=await Promise.all([a?K(a):Promise.resolve(void 0),K(o)]);l=e[0],s=e[1],c=!0}else{const e=await Promise.all([a?createImageBitmap(a,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=e[0],s=e[1]}const u=new i.Texture(l||new ImageData(2,2),i.UVMapping,i.ClampToEdgeWrapping,i.ClampToEdgeWrapping,i.LinearFilter,i.LinearMipMapLinearFilter,i.RGBAFormat,i.UnsignedByteType,1,i.LinearSRGBColorSpace);u.flipY=c,u.needsUpdate=!0;const d=new i.Texture(s,i.UVMapping,i.ClampToEdgeWrapping,i.ClampToEdgeWrapping,i.LinearFilter,i.LinearMipMapLinearFilter,i.RGBAFormat,i.UnsignedByteType,1,i.SRGBColorSpace);d.flipY=c,d.needsUpdate=!0,e.width=s.width,e.height=s.height,e.material.gainMap=u,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class $ extends Q{load(e,t,n,r){let[a,o,s]=e;const l=this.prepareQuadRenderer();let c,u,d;const p=async()=>{if(c&&u&&d){try{await this.render(l,d,c,u)}catch(e){return this.manager.itemError(a),this.manager.itemError(o),this.manager.itemError(s),"function"===typeof r&&r(e),void l.disposeOnDemandRenderer()}"function"===typeof t&&t(l),this.manager.itemEnd(a),this.manager.itemEnd(o),this.manager.itemEnd(s),l.disposeOnDemandRenderer()}};let h=!0,f=0,m=0,g=!0,v=0,y=0,w=!0,b=0,E=0;const M=()=>{if("function"===typeof n){n(new ProgressEvent("progress",{lengthComputable:h&&g&&w,loaded:m+y+E,total:f+v+b}))}};this.manager.itemStart(a),this.manager.itemStart(o),this.manager.itemStart(s);const A=new i.FileLoader(this._internalLoadingManager);A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(this.withCredentials),A.load(a,(async e=>{if("string"===typeof e)throw new Error("Invalid sdr buffer");c=e,await p()}),(e=>{h=e.lengthComputable,m=e.loaded,f=e.total,M()}),(e=>{this.manager.itemError(a),"function"===typeof r&&r(e)}));const x=new i.FileLoader(this._internalLoadingManager);x.setResponseType("arraybuffer"),x.setRequestHeader(this.requestHeader),x.setPath(this.path),x.setWithCredentials(this.withCredentials),x.load(o,(async e=>{if("string"===typeof e)throw new Error("Invalid gainmap buffer");u=e,await p()}),(e=>{g=e.lengthComputable,y=e.loaded,v=e.total,M()}),(e=>{this.manager.itemError(o),"function"===typeof r&&r(e)}));const T=new i.FileLoader(this._internalLoadingManager);return T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(s,(async e=>{if("string"!==typeof e)throw new Error("Invalid metadata string");d=JSON.parse(e),await p()}),(e=>{w=e.lengthComputable,E=e.loaded,b=e.total,M()}),(e=>{this.manager.itemError(s),"function"===typeof r&&r(e)})),l}}class J extends Q{load(e,t,n,r){const a=this.prepareQuadRenderer(),o=new i.FileLoader(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,(async n=>{if("string"===typeof n)throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const o=new Uint8Array(n);let i,s,l;try{const e=await q(o);i=e.sdr,s=e.gainMap,l=e.metadata}catch(he){if(!(he instanceof G||he instanceof Y))throw he;console.warn("Failure to reconstruct an HDR image from ".concat(e,": Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg")),l={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},i=o}try{await this.render(a,l,i,s)}catch(c){return this.manager.itemError(e),"function"===typeof r&&r(c),void a.disposeOnDemandRenderer()}"function"===typeof t&&t(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()}),n,(t=>{this.manager.itemError(e),"function"===typeof r&&r(t)})),a}}const ee={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},te=3e3,ne=3001,re="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",ae=e=>Array.isArray(e);function oe(){let{files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:n,encoding:r,extensions:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;let c,u=null,d=!1;if(n){if(!(n in ee))throw new Error("Preset must be one of: "+Object.keys(ee).join(", "));e=ee[n],t=re}const p=ae(e)&&6===e.length,h=ae(e)&&3===e.length&&e.some((e=>e.endsWith("json"))),f=ae(e)?e[0]:e;if(d=ae(e),c=p?"cube":h?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":null==(s=f.split(".").pop())||null==(s=s.split("?"))||null==(s=s.shift())?void 0:s.toLowerCase(),u="cube"===c?i.CubeTextureLoader:"hdr"===c?l:"exr"===c?z:"jpg"===c||"jpeg"===c?J:"webp"===c?$:null,!u)throw new Error("useEnvironment: Unrecognized file extension: "+e);const m=(0,o.A)((e=>e.gl)),g=(0,o.F)(u,d?[e]:e,(e=>{"webp"!==c&&"jpg"!==c&&"jpeg"!==c||e.setRenderer(m),null==e.setPath||e.setPath(t),a&&a(e)}));let v=d?g[0]:g;var y;"jpg"!==c&&"jpeg"!==c&&"webp"!==c||(v=null==(y=v.renderTarget)?void 0:y.texture);return v.mapping=p?i.CubeReflectionMapping:i.EquirectangularReflectionMapping,"colorSpace"in v?v.colorSpace=(null!==r&&void 0!==r?r:p)?"srgb":"srgb-linear":v.encoding=(null!==r&&void 0!==r?r:p)?ne:te,v}const ie=e=>{return(t=e).current&&t.current.isScene?e.current:e;var t};function se(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var i,s,l,c,u;a={backgroundBlurriness:null!==(i=a.blur)&&void 0!==i?i:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const d=ie(t||n),p=d.background,h=d.environment,f={backgroundBlurriness:d.backgroundBlurriness,backgroundIntensity:d.backgroundIntensity,backgroundRotation:null!==(s=null==(l=d.backgroundRotation)||null==l.clone?void 0:l.clone())&&void 0!==s?s:[0,0,0],environmentIntensity:d.environmentIntensity,environmentRotation:null!==(c=null==(u=d.environmentRotation)||null==u.clone?void 0:u.clone())&&void 0!==c?c:[0,0,0]};return"only"!==e&&(d.environment=r),e&&(d.background=r),(0,o.j)(d,a),()=>{"only"!==e&&(d.environment=h),e&&(d.background=p),(0,o.j)(d,f)}}function le(e){let{scene:t,background:n=!1,map:r,...i}=e;const s=(0,o.A)((e=>e.scene));return a.useLayoutEffect((()=>{if(r)return se(n,t,s,r,i)})),null}function ce(e){let{background:t=!1,scene:n,blur:r,backgroundBlurriness:i,backgroundIntensity:s,backgroundRotation:l,environmentIntensity:c,environmentRotation:u,...d}=e;const p=oe(d),h=(0,o.A)((e=>e.scene));return a.useLayoutEffect((()=>se(t,n,h,p,{blur:r,backgroundBlurriness:i,backgroundIntensity:s,backgroundRotation:l,environmentIntensity:c,environmentRotation:u}))),null}function ue(e){let{children:t,near:n=1,far:r=1e3,resolution:s=256,frames:l=1,map:c,background:u=!1,blur:d,backgroundBlurriness:p,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:m,environmentRotation:g,scene:v,files:y,path:w,preset:b,extensions:E}=e;const M=(0,o.A)((e=>e.gl)),A=(0,o.A)((e=>e.scene)),x=a.useRef(null),[T]=a.useState((()=>new i.Scene)),S=a.useMemo((()=>{const e=new i.WebGLCubeRenderTarget(s);return e.texture.type=i.HalfFloatType,e}),[s]);a.useLayoutEffect((()=>(1===l&&x.current.update(M,T),se(u,v,A,S.texture,{blur:d,backgroundBlurriness:p,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:m,environmentRotation:g}))),[t,T,S.texture,v,A,u,l,M]);let _=1;return(0,o.C)((()=>{(l===1/0||_<l)&&(x.current.update(M,T),_++)})),a.createElement(a.Fragment,null,(0,o.g)(a.createElement(a.Fragment,null,t,a.createElement("cubeCamera",{ref:x,args:[n,r,S]}),y||b?a.createElement(ce,{background:!0,files:y,preset:b,path:w,extensions:E}):c?a.createElement(le,{background:!0,map:c,extensions:E}):null),T))}function de(e){var t,n,i,l;const c=oe(e),u=e.map||c;a.useMemo((()=>(0,o.e)({GroundProjectedEnvImpl:s})),[]);const d=a.useMemo((()=>[u]),[u]),p=null==(t=e.ground)?void 0:t.height,h=null==(n=e.ground)?void 0:n.radius,f=null!==(i=null==(l=e.ground)?void 0:l.scale)&&void 0!==i?i:1e3;return a.createElement(a.Fragment,null,a.createElement(le,(0,r.A)({},e,{map:u})),a.createElement("groundProjectedEnvImpl",{args:d,scale:f,height:p,radius:h}))}function pe(e){return e.ground?a.createElement(de,e):e.map?a.createElement(le,e):e.children?a.createElement(ue,e):a.createElement(ce,e)}},717:(e,t,n)=>{n.d(t,{N:()=>f});var r=n(168),a=n(746),o=n(43),i=n(408),s=Object.defineProperty,l=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const c=new i.Ray,u=new i.Plane,d=Math.cos(Math.PI/180*70),p=(e,t)=>(e%t+t)%t;class h extends i.EventDispatcher{constructor(e,t){super(),l(this,"object"),l(this,"domElement"),l(this,"enabled",!0),l(this,"target",new i.Vector3),l(this,"minDistance",0),l(this,"maxDistance",1/0),l(this,"minZoom",0),l(this,"maxZoom",1/0),l(this,"minPolarAngle",0),l(this,"maxPolarAngle",Math.PI),l(this,"minAzimuthAngle",-1/0),l(this,"maxAzimuthAngle",1/0),l(this,"enableDamping",!1),l(this,"dampingFactor",.05),l(this,"enableZoom",!0),l(this,"zoomSpeed",1),l(this,"enableRotate",!0),l(this,"rotateSpeed",1),l(this,"enablePan",!0),l(this,"panSpeed",1),l(this,"screenSpacePanning",!0),l(this,"keyPanSpeed",7),l(this,"zoomToCursor",!1),l(this,"autoRotate",!1),l(this,"autoRotateSpeed",2),l(this,"reverseOrbit",!1),l(this,"reverseHorizontalOrbit",!1),l(this,"reverseVerticalOrbit",!1),l(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),l(this,"mouseButtons",{LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN}),l(this,"touches",{ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN}),l(this,"target0"),l(this,"position0"),l(this,"zoom0"),l(this,"_domElementKeyEvents",null),l(this,"getPolarAngle"),l(this,"getAzimuthalAngle"),l(this,"setPolarAngle"),l(this,"setAzimuthalAngle"),l(this,"getDistance"),l(this,"listenToKeyEvents"),l(this,"stopListenToKeyEvents"),l(this,"saveState"),l(this,"reset"),l(this,"update"),l(this,"connect"),l(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=e=>{let t=p(e,2*Math.PI),r=m.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let a=Math.abs(t-r);2*Math.PI-a<a&&(t<r?t+=2*Math.PI:r+=2*Math.PI),g.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=p(e,2*Math.PI),r=m.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let a=Math.abs(t-r);2*Math.PI-a<a&&(t<r?t+=2*Math.PI:r+=2*Math.PI),g.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",te),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",te),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),h=s.NONE},this.update=(()=>{const t=new i.Vector3,a=new i.Vector3(0,1,0),o=(new i.Quaternion).setFromUnitVectors(e.up,a),l=o.clone().invert(),p=new i.Vector3,w=new i.Quaternion,b=2*Math.PI;return function(){const E=n.object.position;o.setFromUnitVectors(e.up,a),l.copy(o).invert(),t.copy(E).sub(n.target),t.applyQuaternion(o),m.setFromVector3(t),n.autoRotate&&h===s.NONE&&k(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(m.theta+=g.theta*n.dampingFactor,m.phi+=g.phi*n.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);let M=n.minAzimuthAngle,A=n.maxAzimuthAngle;isFinite(M)&&isFinite(A)&&(M<-Math.PI?M+=b:M>Math.PI&&(M-=b),A<-Math.PI?A+=b:A>Math.PI&&(A-=b),m.theta=M<=A?Math.max(M,Math.min(A,m.theta)):m.theta>(M+A)/2?Math.max(M,m.theta):Math.min(A,m.theta)),m.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,m.phi)),m.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&I||n.object.isOrthographicCamera?m.radius=B(m.radius):m.radius=B(m.radius*v),t.setFromSpherical(m),t.applyQuaternion(l),E.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),y.set(0,0,0));let x=!1;if(n.zoomToCursor&&I){let r=null;if(n.object instanceof i.PerspectiveCamera&&n.object.isPerspectiveCamera){const e=t.length();r=B(e*v);const a=e-r;n.object.position.addScaledVector(O,a),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new i.Vector3(C.x,C.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),x=!0;const a=new i.Vector3(C.x,C.y,0);a.unproject(n.object),n.object.position.sub(a).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(c.origin.copy(n.object.position),c.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(c.direction))<d?e.lookAt(n.target):(u.setFromNormalAndCoplanarPoint(n.object.up,n.target),c.intersectPlane(u,n.target))))}else n.object instanceof i.OrthographicCamera&&n.object.isOrthographicCamera&&(x=1!==v,x&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,I=!1,!!(x||p.distanceToSquared(n.object.position)>f||8*(1-w.dot(n.object.quaternion))>f)&&(n.dispatchEvent(r),p.copy(n.object.position),w.copy(n.object.quaternion),x=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ne),n.domElement.addEventListener("pointerdown",Q),n.domElement.addEventListener("pointercancel",J),n.domElement.addEventListener("wheel",ee)},this.dispose=()=>{var e,t,r,a,o,i;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",ne),null==(t=n.domElement)||t.removeEventListener("pointerdown",Q),null==(r=n.domElement)||r.removeEventListener("pointercancel",J),null==(a=n.domElement)||a.removeEventListener("wheel",ee),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",$),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",J),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",te)};const n=this,r={type:"change"},a={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=s.NONE;const f=1e-6,m=new i.Spherical,g=new i.Spherical;let v=1;const y=new i.Vector3,w=new i.Vector2,b=new i.Vector2,E=new i.Vector2,M=new i.Vector2,A=new i.Vector2,x=new i.Vector2,T=new i.Vector2,S=new i.Vector2,_=new i.Vector2,O=new i.Vector3,C=new i.Vector2;let I=!1;const P=[],R={};function F(){return Math.pow(.95,n.zoomSpeed)}function k(e){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=e:g.theta-=e}function U(e){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=e:g.phi-=e}const L=(()=>{const e=new i.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),y.add(e)}})(),D=(()=>{const e=new i.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),y.add(e)}})(),j=(()=>{const e=new i.Vector3;return function(t,r){const a=n.domElement;if(a&&n.object instanceof i.PerspectiveCamera&&n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let i=e.length();i*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*i/a.clientHeight,n.object.matrix),D(2*r*i/a.clientHeight,n.object.matrix)}else a&&n.object instanceof i.OrthographicCamera&&n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),D(r*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function N(e){n.object instanceof i.PerspectiveCamera&&n.object.isPerspectiveCamera||n.object instanceof i.OrthographicCamera&&n.object.isOrthographicCamera?v/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(e){n.object instanceof i.PerspectiveCamera&&n.object.isPerspectiveCamera||n.object instanceof i.OrthographicCamera&&n.object.isOrthographicCamera?v*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function H(e){if(!n.zoomToCursor||!n.domElement)return;I=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top,o=t.width,i=t.height;C.x=r/o*2-1,C.y=-a/i*2+1,O.set(C.x,C.y,1).unproject(n.object).sub(n.object.position).normalize()}function B(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function V(e){w.set(e.clientX,e.clientY)}function W(e){M.set(e.clientX,e.clientY)}function Y(){if(1==P.length)w.set(P[0].pageX,P[0].pageY);else{const e=.5*(P[0].pageX+P[1].pageX),t=.5*(P[0].pageY+P[1].pageY);w.set(e,t)}}function G(){if(1==P.length)M.set(P[0].pageX,P[0].pageY);else{const e=.5*(P[0].pageX+P[1].pageX),t=.5*(P[0].pageY+P[1].pageY);M.set(e,t)}}function X(){const e=P[0].pageX-P[1].pageX,t=P[0].pageY-P[1].pageY,n=Math.sqrt(e*e+t*t);T.set(0,n)}function Z(e){if(1==P.length)b.set(e.pageX,e.pageY);else{const t=ae(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);b.set(n,r)}E.subVectors(b,w).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(k(2*Math.PI*E.x/t.clientHeight),U(2*Math.PI*E.y/t.clientHeight)),w.copy(b)}function q(e){if(1==P.length)A.set(e.pageX,e.pageY);else{const t=ae(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);A.set(n,r)}x.subVectors(A,M).multiplyScalar(n.panSpeed),j(x.x,x.y),M.copy(A)}function K(e){const t=ae(e),r=e.pageX-t.x,a=e.pageY-t.y,o=Math.sqrt(r*r+a*a);S.set(0,o),_.set(0,Math.pow(S.y/T.y,n.zoomSpeed)),N(_.y),T.copy(S)}function Q(e){var t,r;!1!==n.enabled&&(0===P.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",$),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",J)),function(e){P.push(e)}(e),"touch"===e.pointerType?function(e){switch(re(e),P.length){case 1:switch(n.touches.ONE){case i.TOUCH.ROTATE:if(!1===n.enableRotate)return;Y(),h=s.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===n.enablePan)return;G(),h=s.TOUCH_PAN;break;default:h=s.NONE}break;case 2:switch(n.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&X(),n.enablePan&&G(),h=s.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&X(),n.enableRotate&&Y(),h=s.TOUCH_DOLLY_ROTATE;break;default:h=s.NONE}break;default:h=s.NONE}h!==s.NONE&&n.dispatchEvent(a)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){H(e),T.set(e.clientX,e.clientY)}(e),h=s.DOLLY;break;case i.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;W(e),h=s.PAN}else{if(!1===n.enableRotate)return;V(e),h=s.ROTATE}break;case i.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;V(e),h=s.ROTATE}else{if(!1===n.enablePan)return;W(e),h=s.PAN}break;default:h=s.NONE}h!==s.NONE&&n.dispatchEvent(a)}(e))}function $(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(re(e),h){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;Z(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;q(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&K(e),n.enablePan&&q(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&K(e),n.enableRotate&&Z(e)}(e),n.update();break;default:h=s.NONE}}(e):function(e){if(!1===n.enabled)return;switch(h){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),E.subVectors(b,w).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(k(2*Math.PI*E.x/t.clientHeight),U(2*Math.PI*E.y/t.clientHeight)),w.copy(b),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),_.subVectors(S,T),_.y>0?N(F()):_.y<0&&z(F()),T.copy(S),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){A.set(e.clientX,e.clientY),x.subVectors(A,M).multiplyScalar(n.panSpeed),j(x.x,x.y),M.copy(A),n.update()}(e)}}(e))}function J(e){var t,r,a;!function(e){delete R[e.pointerId];for(let t=0;t<P.length;t++)if(P[t].pointerId==e.pointerId)return void P.splice(t,1)}(e),0===P.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",$),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",J)),n.dispatchEvent(o),h=s.NONE}function ee(e){!1===n.enabled||!1===n.enableZoom||h!==s.NONE&&h!==s.ROTATE||(e.preventDefault(),n.dispatchEvent(a),function(e){H(e),e.deltaY<0?z(F()):e.deltaY>0&&N(F()),n.update()}(e),n.dispatchEvent(o))}function te(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:j(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:j(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:j(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:j(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function ne(e){!1!==n.enabled&&e.preventDefault()}function re(e){let t=R[e.pointerId];void 0===t&&(t=new i.Vector2,R[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ae(e){const t=e.pointerId===P[0].pointerId?P[1]:P[0];return R[t.pointerId]}void 0!==t&&this.connect(t),this.update()}}const f=o.forwardRef(((e,t)=>{let{makeDefault:n,camera:i,regress:s,domElement:l,enableDamping:c=!0,keyEvents:u=!1,onChange:d,onStart:p,onEnd:f,...m}=e;const g=(0,a.A)((e=>e.invalidate)),v=(0,a.A)((e=>e.camera)),y=(0,a.A)((e=>e.gl)),w=(0,a.A)((e=>e.events)),b=(0,a.A)((e=>e.setEvents)),E=(0,a.A)((e=>e.set)),M=(0,a.A)((e=>e.get)),A=(0,a.A)((e=>e.performance)),x=i||v,T=l||w.connected||y.domElement,S=o.useMemo((()=>new h(x)),[x]);return(0,a.C)((()=>{S.enabled&&S.update()}),-1),o.useEffect((()=>(u&&S.connect(!0===u?T:u),S.connect(T),()=>{S.dispose()})),[u,T,s,S,g]),o.useEffect((()=>{const e=e=>{g(),s&&A.regress(),d&&d(e)},t=e=>{p&&p(e)},n=e=>{f&&f(e)};return S.addEventListener("change",e),S.addEventListener("start",t),S.addEventListener("end",n),()=>{S.removeEventListener("start",t),S.removeEventListener("end",n),S.removeEventListener("change",e)}}),[d,p,f,S,g,b]),o.useEffect((()=>{if(n){const e=M().controls;return E({controls:S}),()=>E({controls:e})}}),[n,S]),o.createElement("primitive",(0,r.A)({ref:t,object:S,enableDamping:c},m))}))},503:(e,t,n)=>{n.d(t,{x:()=>y});var r=n(168),a=n(43),o=n(746),i=n(408);class s extends i.ExtrudeGeometry{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{bevelEnabled:n=!1,bevelSize:r=8,bevelThickness:a=10,font:o,height:i=50,size:s=100,lineHeight:l=1,letterSpacing:c=0,...u}=t;if(void 0===o)super();else{super(o.generateShapes(e,s,{lineHeight:l,letterSpacing:c}),{...u,bevelEnabled:n,bevelSize:r,bevelThickness:a,depth:i})}this.type="TextGeometry"}}var l=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class u extends i.Loader{constructor(e){super(e)}load(e,t,n,r){const a=new i.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(e=>{if("string"!==typeof e)throw new Error("unsupported data type");const n=JSON.parse(e),r=this.parse(n);t&&t(r)}),n,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new d(e)}}class d{constructor(e){c(this,"data"),this.data=e}generateShapes(e){const t=[],n={letterSpacing:0,lineHeight:1,...arguments.length>2?arguments[2]:void 0},r=function(e,t,n,r){const a=Array.from(e),o=t/n.resolution,i=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,s=[];let l=0,c=0;for(let u=0;u<a.length;u++){const e=a[u];if("\n"===e)l=0,c-=i*r.lineHeight;else{const t=p(e,o,l,c,n);t&&(l+=t.offsetX+r.letterSpacing,s.push(t.path))}}return s}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,this.data,n);for(let a=0,o=r.length;a<o;a++)Array.prototype.push.apply(t,r[a].toShapes(!1));return t}}function p(e,t,n,r,a){const o=a.glyphs[e]||a.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+a.familyName+".");const s=new i.ShapePath;let l,c,u,d,p,h,f,m;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let a=0,o=e.length;a<o;){switch(e[a++]){case"m":l=parseInt(e[a++])*t+n,c=parseInt(e[a++])*t+r,s.moveTo(l,c);break;case"l":l=parseInt(e[a++])*t+n,c=parseInt(e[a++])*t+r,s.lineTo(l,c);break;case"q":u=parseInt(e[a++])*t+n,d=parseInt(e[a++])*t+r,p=parseInt(e[a++])*t+n,h=parseInt(e[a++])*t+r,s.quadraticCurveTo(p,h,u,d);break;case"b":u=parseInt(e[a++])*t+n,d=parseInt(e[a++])*t+r,p=parseInt(e[a++])*t+n,h=parseInt(e[a++])*t+r,f=parseInt(e[a++])*t+n,m=parseInt(e[a++])*t+r,s.bezierCurveTo(p,h,f,m,u,d)}}}return{offsetX:o.ha*t,path:s}}c(d,"isFont"),c(d,"type");var h=n(906);let f=null;async function m(e){const t=await async function(e){return"string"===typeof e?await(await fetch(e)).json():e}(e);return n=t,f||(f=new u),f.parse(n);var n}function g(e){return(0,h.DY)(m,[e])}g.preload=e=>(0,h.uv)(m,[e]),g.clear=e=>(0,h.IU)([e]);const v=["string","number"],y=a.forwardRef(((e,t)=>{let{font:n,letterSpacing:l=0,lineHeight:c=1,size:u=1,height:d=.2,bevelThickness:p=.1,bevelSize:h=.01,bevelEnabled:f=!1,bevelOffset:m=0,bevelSegments:y=4,curveSegments:w=8,smooth:b,children:E,...M}=e;a.useMemo((()=>(0,o.e)({RenamedTextGeometry:s})),[]);const A=a.useRef(null),x=g(n),T=(0,a.useMemo)((()=>({font:x,size:u,height:d,bevelThickness:p,bevelSize:h,bevelEnabled:f,bevelSegments:y,bevelOffset:m,curveSegments:w,letterSpacing:l,lineHeight:c})),[x,u,d,p,h,f,y,m,w,l,c]),[S,..._]=(0,a.useMemo)((()=>(e=>{let t="";const n=[];return a.Children.forEach(e,(e=>{v.includes(typeof e)?t+=e+"":n.push(e)})),[t,...n]})(E)),[E]),O=a.useMemo((()=>[S,T]),[S,T]);return a.useLayoutEffect((()=>{b&&(A.current.geometry=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);const n={},r=e.getIndex(),a=e.getAttribute("position"),o=r?r.count:a.count;let s=0;const l=Object.keys(e.attributes),c={},u={},d=[],p=["getX","getY","getZ","getW"];for(let i=0,g=l.length;i<g;i++){const t=l[i];c[t]=[];const n=e.morphAttributes[t];n&&(u[t]=new Array(n.length).fill(0).map((()=>[])))}const h=Math.log10(1/t),f=Math.pow(10,h);for(let i=0;i<o;i++){const t=r?r.getX(i):i;let a="";for(let n=0,r=l.length;n<r;n++){const r=l[n],o=e.getAttribute(r),i=o.itemSize;for(let e=0;e<i;e++)a+="".concat(~~(o[p[e]](t)*f),",")}if(a in n)d.push(n[a]);else{for(let n=0,r=l.length;n<r;n++){const r=l[n],a=e.getAttribute(r),o=e.morphAttributes[r],i=a.itemSize,s=c[r],d=u[r];for(let e=0;e<i;e++){const n=p[e];if(s.push(a[n](t)),o)for(let e=0,r=o.length;e<r;e++)d[e].push(o[e][n](t))}}n[a]=s,d.push(s),s++}}const m=e.clone();for(let g=0,v=l.length;g<v;g++){const t=l[g],n=e.getAttribute(t),r=new n.array.constructor(c[t]),a=new i.BufferAttribute(r,n.itemSize,n.normalized);if(m.setAttribute(t,a),t in u)for(let o=0;o<u[t].length;o++){const n=e.morphAttributes[t][o],r=new n.array.constructor(u[t][o]),a=new i.BufferAttribute(r,n.itemSize,n.normalized);m.morphAttributes[t][o]=a}}return m.setIndex(d),m}(A.current.geometry,b),A.current.geometry.computeVertexNormals())}),[O,b]),a.useImperativeHandle(t,(()=>A.current),[]),a.createElement("mesh",(0,r.A)({},M,{ref:A}),a.createElement("renamedTextGeometry",{args:O}),_)}))}}]);
//# sourceMappingURL=81.2b7e49ee.chunk.js.map